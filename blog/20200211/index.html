<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png"><link rel="icon" type="image/png" href="/img/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content=""><meta name="author" content="Regnover"><meta name="keywords" content=""><title>C++ 05 ~ Regnover</title><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/5.10.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/mdbootstrap/4.8.7/css/mdb.min.css"><link rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/3.0.1/github-markdown.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1067060_qzomjdt8bmp.css"><link rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="/css/main.css"><script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script><style type="text/css">.banner-bg{background-image:url(https://s2.ax1x.com/2020/02/12/1H1EfP.png);background-position:center;background-repeat:repeat-y;background-size:cover;background-attachment:fixed}</style><meta name="generator" content="Hexo 4.2.0"></head><body class="banner-bg"><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/">&nbsp;<strong>Regnover</strong>&nbsp;</a> <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/">首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/">归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/">分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/">标签</a></li><li class="nav-item"><a class="nav-link" href="/about/">关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i class="iconfont icon-search"></i>&nbsp;&nbsp;</a></li></ul></div></div></nav><div class="view intro-2 rgba-black-slight" id="background"><div class="full-bg-img"><div class="mask flex-center"><div class="container text-center white-text fadeInUp"><span class="h2" id="subtitle"></span><br><p class="mt-3"><i class="far fa-calendar-alt"></i> <span class="post-date">2020-02-11&nbsp;|&nbsp;</span> <i class="far fa-chart-bar"></i> <span class="post-count">1.9k</span>字&nbsp;|&nbsp; <i class="far fa-clock"></i> <span class="post-count">6</span>分钟 <span id="busuanzi_container_page_pv" style="display:none">&nbsp;|&nbsp; <i class="far fa-eye"></i> <span id="busuanzi_value_page_pv"></span>次</span></p></div></div></div></div></header><main id="mainContent" class="rgba-black-slight"><div class="container-fluid"><div class="row"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-md"><div class="py-5 z-depth-3" id="board"><div class="post-content mx-auto" id="post"><div class="markdown-body"><p>第九章 模板<br>第十章 流类库和输入输出</p><a id="more"></a><h1 id="第九章-模板"><a href="#第九章-模板" class="headerlink" title="第九章 模板"></a>第九章 模板</h1><h2 id="9-1-模板的概念"><a href="#9-1-模板的概念" class="headerlink" title="9.1 模板的概念"></a>9.1 模板的概念</h2><p>模板是实现代码复用的一种工具，它可以实现类型参数化，把类型定义为参数，实现代码的真正复用。<br>模板分两类：函数模板和类模板。用一个代码段指定一组函数称为函数模板，或用一个代码段指定一组相关类称为类模版。</p><h2 id="9-2-函数模板的定义与使用"><a href="#9-2-函数模板的定义与使用" class="headerlink" title="9.2 函数模板的定义与使用"></a>9.2 函数模板的定义与使用</h2><h3 id="9-2-1-函数模板的定义"><a href="#9-2-1-函数模板的定义" class="headerlink" title="9.2.1 函数模板的定义"></a>9.2.1 函数模板的定义</h3><p>格式为：</p><pre><code>template &lt;typename(或 class) 数据类型参数标识符&gt;
&lt;返回类型&gt;&lt;函数名&gt;(参数表)
{
函数体
}</code></pre><h3 id="9-2-2-模板函数"><a href="#9-2-2-模板函数" class="headerlink" title="9.2.2 模板函数"></a>9.2.2 模板函数</h3><p>在使用函数模板时，要将形参“数据类型参数标识符”实例化为确定的数据类型。<br>将类型形参实例化的参数称为模板实参，用模板实参实例化的函数称为模板函数。</p><h3 id="9-2-3-重载模板函数"><a href="#9-2-3-重载模板函数" class="headerlink" title="9.2.3 重载模板函数"></a>9.2.3 重载模板函数</h3><p>函数模板可使用多种方式重载。可以使用其它函数模板，指定不同参数的相同函数名。也可以用非模板函数重载。</p><ol><li>用非模板函数重载函数模板有两种方法：<ul><li>借用函数模板的函数体，只声明非模板函数的原型，它的函数体借用函数模板的函数体。</li><li>重新定义函数体。即重新定义一个完整的非模板函数，它所带的参数可以随意。</li></ul></li><li>在 C++中，函数模板与同名的非模板函数重载时，应遵循下列调用原则：<br>首先寻找一个参数完全匹配的函数，若找到就调用它。<br>若找不到，则寻找一个函数模板，将其实例化生成一个匹配的模板函数，若找到就调用它。<br>若找不到，则从第一步中通过类型转换产生参数匹配，若找到就调用它。否则调用失败。</li></ol><h2 id="9-3-类模板的定义和使用"><a href="#9-3-类模板的定义和使用" class="headerlink" title="9.3    类模板的定义和使用"></a>9.3 类模板的定义和使用</h2><h3 id="9-3-1-类模板的定义"><a href="#9-3-1-类模板的定义" class="headerlink" title="9.3.1 类模板的定义"></a>9.3.1 类模板的定义</h3><p>格式为：</p><pre><code>template&lt;class 数据类型参数标识符&gt; class 类名
{
//……
}；</code></pre><h3 id="9-3-2-模板类"><a href="#9-3-2-模板类" class="headerlink" title="9.3.2 模板类"></a>9.3.2 模板类</h3><p>将类模板的模板参数实例化后生成的具体的类，就是模板类。由类模板生成模板类的一般形式为：<br>类名&lt;模板实参表&gt; 对象名 1，对象名 2，…，对象名 n；</p><h1 id="第十章-流类库和输入输出"><a href="#第十章-流类库和输入输出" class="headerlink" title="第十章 流类库和输入输出"></a>第十章 流类库和输入输出</h1><h2 id="10-1-流的概念及流类库"><a href="#10-1-流的概念及流类库" class="headerlink" title="10.1 流的概念及流类库"></a>10.1 流的概念及流类库</h2><h3 id="10-1-1-流的概念"><a href="#10-1-1-流的概念" class="headerlink" title="10.1.1 流的概念"></a>10.1.1 流的概念</h3><p>C++中的流是指数据从一个对象传递到另一个对象的操作。从流中读取数据称为提取操作，向流内添加数据称为插入操作。<br>流在使用前要建立，使用后要删除。如果数据的传递是在设备之间进行，这种流就称为 I/O 流。<br>C++专门内置了一些供用户使用的类，在这些类中封装了可以实现输入输出操作的函数，这些类统称为 I/O 流类。<br>C++流预定义了 4 个标准流类对象，它们可以直接用来输入输出。这些标准流类对象都包含在头文件 iostream.h 中。<br>istream cin; //与标准输入设备相关联的标准输入流。<br>ostream cout; //与标准输出设备相关联的标准输出流。<br>ostream cerr; //与标准错误输出设备相关联的非缓冲方式的标准输出流。<br>ostream clog; //与标准错误输出设备相关联的缓冲方式的标准输出流。</p><h3 id="10-1-2-流类库"><a href="#10-1-2-流类库" class="headerlink" title="10.1.2    流类库"></a>10.1.2 流类库</h3><p>C++的流类库有两个平行的基类 streambuf 和 ios，其它的流类都是从这两个基类直接或间接派生的。<br>使用这些流类库时，必须包含相应的头文件。</p><h2 id="10-2-输入输出的格式控制"><a href="#10-2-输入输出的格式控制" class="headerlink" title="10.2    输入输出的格式控制"></a>10.2 输入输出的格式控制</h2><p>C++仍可使用 C 中的 printf()和 scanf()进行格式化控制，同时又提供了两种格式化控制的方法，<br>一是使用 ios 类中的有关格式控制的成员函数，二是使用执行格式化输入/输出的格式控制符。</p><h3 id="10-2-1-用-ios-类的成员函数进行格式控制"><a href="#10-2-1-用-ios-类的成员函数进行格式控制" class="headerlink" title="10.2.1    用 ios 类的成员函数进行格式控制"></a>10.2.1 用 ios 类的成员函数进行格式控制</h3><p>使用这种方式进行格式控制主要是通过设置及清除格式状态标志、设置域宽、设置填充字符和设置输出精度的操作来完成的。</p><h3 id="10-2-2-用格式控制符进行格式控制"><a href="#10-2-2-用格式控制符进行格式控制" class="headerlink" title="10.2.2    用格式控制符进行格式控制"></a>10.2.2 用格式控制符进行格式控制</h3><ul><li>预定义的格式控制符</li><li>自定义的格式控制符</li></ul><h2 id="10-3-输入与输出运算符的重载"><a href="#10-3-输入与输出运算符的重载" class="headerlink" title="10.3 输入与输出运算符的重载"></a>10.3 输入与输出运算符的重载</h2><ol><li>定义运算符“&lt;&lt;”重载函数的一般形式为：<pre><code>ostream &amp;operator&lt;&lt;(ostream &amp;stream,类名 对象名)
{
//操作代码
return stream;
}</code></pre></li><li>定义运算符“&gt;&gt;”重载函数的一般形式为：<pre><code class="istream">{
//操作代码return stream;
}</code></pre></li></ol><h2 id="10-4-文件操作"><a href="#10-4-文件操作" class="headerlink" title="10.4    文件操作"></a>10.4 文件操作</h2><h3 id="10-4-1-创建文件流"><a href="#10-4-1-创建文件流" class="headerlink" title="10.4.1 创建文件流"></a>10.4.1 创建文件流</h3><p>在 C++中进行文件操作，要包含&lt;fstream.h&gt;。该头文件包括了 ifstream（从文件输入）、ofstream（向文件输出）、<br>fstream（从文件输入输出）流类的定义。它们分别派生自 istream、ostream、iostream。<br>建立文件流就是定义文件流类的对象。如<br>ifstream fin; ofstream fout; fstream fio;<br>建立了流以后，就可以把某一个流与文件建立联系，进行文件的读写操作了。</p><h3 id="10-4-2-文件的打开与关闭"><a href="#10-4-2-文件的打开与关闭" class="headerlink" title="10.4.2 文件的打开与关闭"></a>10.4.2 文件的打开与关闭</h3><p>可以在定义文件流对象的同时完成打开文件的工作，也可在定义文件流对象以后通过open()函数完成。<br>open()函数是上述三个流类的成员函数，定义在 fstream.h 头文件中。<br>函数原型为：<code>void open(const unsigned char *,int mode,int dcces=filebuf::openprot);</code><br>说明：第一个参数用来传递文件名；第二个参数的值决定文件打开的方式，必须从下列值中选取：<br>ios::app //使输出追加到文件尾部，只用于输出<br>ios::ate //查找文件尾<br>ios::in //打开一个文件进行读操作，只用于输入<br>ios::nocreate //文件不存在，导致 open()失败<br>ios::noreplace //若文件存在，则 open()失败<br>ios::out //打开一个文件进行写操作，只用于输出<br>ios::trunc //删除同名文件<br>ios::binary //以二进制方式打开文件，缺省为文本方式以上各值可以组合使用，之间用“|”分开。</p><h3 id="10-4-3-文件的读写"><a href="#10-4-3-文件的读写" class="headerlink" title="10.4.3 文件的读写"></a>10.4.3 文件的读写</h3><ul><li>文件的顺序读写<br>get()函数 ：它从流中每次读出一个字节或一个字符放入引用 ch&amp;中。<br>put()函数：它将一个字节或一个字符写入流中。<br>read()函数：从相应的流读出 num 个字节或字符的数据，把他们放入指针所指向的缓冲区中。<br>buf 是一个指向读入数据存放空间的指针，num 说明要读入数据的字节或字符数。<br>write()函数：从 buf 所指向的缓冲区把 num 个字节的数据写到相应的流中。<br>参数的含义、调用及注意事项与 read()相同。</li><li>文件的随机读写<br>完成定位操作的函数如下：<br>函数 seekg()：用于输入文件，将文件的读指针从 origin 说明的位置移动 offset 个字节；<br>函数 seekp()：用于输出文件，将文件的写指针从 origin 说明的位置移动 offset 个字节。<br>函数 tellg()：用于输入文件，确定文件当前指针的位置。<br>函数 tellp()：用于输出文件，确定文件当前指针的位置。</li></ul><hr></div><br><div><div id="post-tag"><span><i class="iconfont icon-inbox"></i> <a class="hover-with-bg" href="/categories/%E6%96%87%E6%A1%A3">文档</a> &nbsp; </span><span><i class="iconfont icon-tag"></i> <a class="hover-with-bg" href="/tags/cpp">cpp</a></span></div><div id="post-note"><div><strong>本文作者：</strong><a href="/">Regnover</a></div><div><strong>本文链接：</strong><a href="http://regnover.xyz/blog/20200211/">http://regnover.xyz/blog/20200211/</a></div><div><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" target="_blank" rel="nofollow noopener noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</div></div><div id="post-nav" class="container"><div class="row"><a href="/blog/20200210/" id="post-nav-next" class="col"><span class="post-nav-title">C++ 04</span> <i class="fas fa-arrow-right"></i></a></div></div></div></div><div class="col-lg-10 mx-auto nopadding-md"><div class="container comments mx-auto" id="comments"></div></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container"><div id="toc"><p class="h4"><i class="far fa-list-alt"></i>&nbsp;目录</p><div id="tocbot"></div></div></div></div></div></main><div id="sidebar" class="sidebar-hide"><span class="sidebar-button sidebar-button-shift" id="toggle-sidebar"><i class="fa fa-arrow-right on" aria-hidden="true"></i></span><div class="sidebar-overlay"></div><div class="sidebar-intrude"><div class="sidebar-avatar"><img src="/img/avatar.jpg" srcset="/img/avatar.jpg" alt="avatar"></div><div class="text-center sidebar-about"><p class="h3 sidebar-author">Regnover</p><p class="sidebar-subtitle"></p><a href="https://github.com/Regnover" class="h4" target="_blank"><i class="fab fa-github" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="https://twitter.com" class="h4" target="_blank"><i class="fab fa-twitter" aria-hidden="true"></i> </a>&nbsp;&nbsp; <a href="mailto:example@example.com" class="h4" target="_blank"><i class="fas fa-envelope" aria-hidden="true"></i> </a>&nbsp;&nbsp;</div><div class="sidebar-friend"><p class="h6 sidebar-friend-title"><span class="sidebar-label-left"><i class="fas fa-user-friends"></i></span> <span class="sidebar-label">友情链接</span></p><ul class="list-group"><a href="https://example.com/" target="_blank"><li class="list-group-item"><i class="fas fa-quote-left"></i>&nbsp; friendname</li></a></ul></div></div></div><a class="z-depth-1" id="scroll-top-button" href="#" role="button"><i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div><div id="footerContent" class="rgba-black-slight"><footer class="pt-5"><div class="text-center py-3"><div class="footer-theme"><a href="https://hexo.io" target="_blank" rel="nofollow noopener noreferrer">Hexo</a> theme <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener noreferrer">Fluid</a> mod by <a href="https://github.com/qixa/hexo-theme-fluid-mod" target="_blank" rel="nofollow noopener noreferrer">Julydate</a></div><div class="footer-copyright">©2020&nbsp;Regnover</div><div class="footer-siteview"><span id="busuanzi_container_site_pv" style="display:none">被瞅了<span id="busuanzi_value_site_pv"></span>次 </span><span id="busuanzi_container_site_uv" style="display:none">| 被<span id="busuanzi_value_site_uv"></span>人看爆</span></div><div class="footer-hitokoto"><a id="hitokotoa" href="#" target="_blank" rel="nofollow noopener noreferrer"><span id="hitokoto"></span></a></div></div></footer></div><script src="/lib/popper/popper.min.js"></script><script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script><script src="https://cdn.staticfile.org/mdbootstrap/4.8.7/js/mdb.min.js"></script><script src="/js/main.js"></script><script src="/js/lazyload.js"></script><script src="https://cdn.staticfile.org/tocbot/4.8.1/tocbot.min.js"></script><script src="/js/post.js"></script><script src="https://cdn.staticfile.org/typed.js/2.0.9/typed.min.js"></script><script type="text/javascript">var typed=new Typed("#subtitle",{strings:["  ","C++ 05&nbsp;"],cursorChar:"_",typeSpeed:70,loop:!1});typed.stop(),$(document).ready(function(){$(".typed-cursor").addClass("h2"),typed.start()})</script><script src="https://cdn.staticfile.org/anchor-js/4.2.0/anchor.min.js"></script><script type="text/javascript">anchors.options = {
      placement: "right",
      visible: "hover",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))</script><script src="/js/local-search.js"></script><script type="text/javascript">var path="/local-search.xml",inputArea=document.querySelector("#local-search-input");inputArea.onclick=function(){getSearchFile(path),this.onclick=null}</script><script src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js"></script><script type="text/javascript">var setupFancybox=function(){$("#post img:not(.no-zoom img, img[no-zoom])").each(function(){var t=document.createElement("a");$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),$(this).wrap(t)})};setupFancybox()</script><script type="text/javascript">$("img.image_random").each(function(){var n=$(this);$.get("//img.xjh.me/random_img.php?return=json",function(i,m){"success"===m&&200===i.result&&(n[0].src=i.img)})})</script><script type="text/javascript">function hitokoto(t){$("#hitokoto").stop().fadeOut(function(){$("#hitokoto").html(t.hitokoto),document.getElementById("hitokotoa").href="https://hitokoto.cn?id="+t.id,$("#hitokoto").stop().fadeIn()})}function getHitokoto(){var t=["a","b","c","d"],o=document.createElement("script");o.type="text/javascript",o.id="hitokotoko_js",o.src="//v1.hitokoto.cn/?encode=json&callback=hitokoto&charset=utf-8&cat="+t[Math.floor(Math.random()*t.length)],$("#hitokoto").append(o)}$(document).ready(function(){getHitokoto()}),setInterval(getHitokoto,1e4)</script><script async src="//cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js"></script><script type="text/javascript">$("#background").removeClass("banner-bg"),$("body").addClass("banner-bg");var postToTopHight=$("#board").offset().top;$(window).scroll(function(){var o=document.body.scrollTop+document.documentElement.scrollTop;postToTopHight<=o?($("#background").removeClass("rgba-black-slight"),$("#mainContent").removeClass("rgba-black-slight"),$("#footerContent").removeClass("rgba-black-slight")):($("#background").addClass("rgba-black-slight"),$("#mainContent").addClass("rgba-black-slight"),$("#footerContent").addClass("rgba-black-slight"))})</script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="网页崩溃了~~"},window.onfocus=function(){document.title=originalTitle}</script><script type="text/javascript">console.log("雪花效果 code by kvv.me"),function(){function n(){r.width=window.innerWidth,r.height=window.innerHeight,c=Math.round(window.innerWidth*window.innerHeight/1e4)}var r=document.createElement("canvas"),d=requestAnimationFrame||msRequestAnimationFrame||function(n){setTimeout(n,16)},h=0,c=0,m=[];n(),r.className="snow",document.body.appendChild(r);for(var i=0;i<c;i++)m.push({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,radius:4*Math.random()+1,direction:2*Math.random()-.5});addEventListener("resize",n),d(function n(){var i=window.innerWidth,e=window.innerHeight,t=r.getContext("2d");t.clearRect(0,0,i,e),t.fillStyle="rgba(255, 255, 255, 0.7)",t.beginPath(),h+=.01;for(var a=0;a<c;a++){var o=m[a];o&&(t.moveTo(o.x,o.y),t.arc(o.x,o.y,o.radius,0,2*Math.PI,!0),o.y+=Math.cos(h)+o.radius/2,o.x+=Math.sin(h*o.direction),(o.x>i+5||o.x<-5||o.y>e)&&(0<a%3?(m[a].x=Math.random()*i,m[a].y=-10):(0<Math.sin(h*o.direction)?m[a].x=-5:m[a].x=i+5,m[a].y=Math.random()*e)))}t.fill(),d(n)})}()</script></body></html>